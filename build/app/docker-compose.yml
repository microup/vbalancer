version: '3.6'
         
services:

  test1:
    image: test1
    container_name: ""
    hostname: 'test1'
    restart: always
    expose:
      - "8020"
    ports:
      - "8020:8020"
    shm_size: "256m"
    environment:
        - PORT=8020

  test2:
    image: test1
    container_name: "test2"
    hostname: 'test2'
    restart: always
    ports:
      - "8030:8030"
    expose:
      - "8030"
    shm_size: "256m"
    environment:
        - PORT=8030

  test3:
    image: test1
    container_name: "test3"
    hostname: 'test2'
    restart: always
    ports:
      - "8040:8040"
    expose:
      - "8040"
    shm_size: "256m"
    environment:
        - PORT=8040    

  jaeger:
    image: jaegertracing/all-in-one:1.39
    ports:
      - "6831:6831/udp"
      - "16686:16686"
      - "5775:5775/udp"
      - "6832:6832/udp"
      - "5778:5778"
      - "14268:14268"
      - "9411:9411"
    environment:
      - COLLECTOR_ZIPKIN_HTTP_PORT=9411  